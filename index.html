<script>
    async function predictOutcome() {
        const age = parseFloat(document.getElementById('age').value);
        const ddimer = parseFloat(document.getElementById('ddimer').value);
        const crp = parseFloat(document.getElementById('crp').value);
        const ferritin = parseFloat(document.getElementById('ferritin').value);
        const oxygen = parseFloat(document.getElementById('oxygen').value);

        const inputData = {
            age: age,
            ddimer: ddimer,
            crp: crp,
            ferritin: ferritin,
            oxygen: oxygen
        };

        try {
            const response = await fetch('https://covidalarm.onrender.com/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(inputData)
            });

            const result = await response.json();

            if (result.prediction !== undefined) {
                document.getElementById('result').innerText = 
                  result.prediction === 1 ? "⚠️ High Risk (Death)" : "✅ Safe (Discharge)";
            } else {
                document.getElementById('result').innerText = "❌ Prediction failed: " + result.error;
                console.error("Error:", result.error);
            }
        } catch (error) {
            console.error("Fetch failed:", error);
            document.getElementById('result').innerText = "❌ Network or server error";
        }
    }
</script>
